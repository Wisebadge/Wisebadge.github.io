<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <title>Ionic Template</title>

    <!--link href="http://code.ionicframework.com/1.0.0-beta.8/css/ionic.css" rel="stylesheet">
    <script src="http://code.ionicframework.com/1.0.0-beta.8/js/ionic.bundle.js">
    </script>
    <script src="http://clic.cimec.unitn.it/~elia.bruni/tank/ionic.cards.js"></script-->

    <link href="css/style.css" rel="stylesheet">
    <!--if no internet-->
    <script src="lib/ionic/js/ionic.bundle.js"></script>
    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <script type="text/javascript" src="js/cards.js"></script>
    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>
    <script src="js/jquery.js"></script>



</head>

<style type="text/css">
body {
    cursor: url('http://ionicframework.com/img/finger.png'), auto;
}
/* Your app's CSS, go crazy, make it your own */

.ionic-logo {
    display: block;
    margin: 15px auto;
    width: 96px;
    height: 96px;
}
.bar.bar-transparent {
    background-color: transparent;
    background-image: none;
    border: none;
}
.bar .title {
    color: #eee;
}
.bar.bar-mod {
    background-color: transparent !important;
    margin: 0 0px !important;
}
.deuglify {
    background: rgba(0, 0, 0, 0.20);
    -moz-box-shadow: 0px 2px 2px 0px rgba(0, 0, 0, 0.30);
    box-shadow: 0px 2px 2px 0px rgba(0, 0, 0, 0.30);
}
a .stnd {
    color: white !important;
    opacity: 1;
}
.swipe-cards {
    position: fixed;
}
.swipe-card {
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
    display: none;
    position: fixed;
    -webkit-transform: scale(1, 1);
    left: 50%;
    top: 50%;
    width: 300px;
    height: 300px;
    margin-left: -150px;
    margin-top: -150px;
    box-sizing: border-box;
    background-color: rgb(255, 255, 255);
    border-radius: 4px;
    overflow: hidden;
    -webkit-animation-fill-mode: forwards;
}
.swipe-card .title {
    height: 40px;
    padding: 5px;
    line-height: 30px;
    color: #444;
}
.swipe-card .image {
    overflow: hidden;
    max-height: 210px;
}
.swipe-card .button {
    border: none;
}
.swipe-card .image img {
    width: 100%;
    border-radius: 0px 0px 4px 4px;
}
#start-card {
    color: #fff;
    background-color: #30BD8A;
    line-height: 300px;
    word-wrap: break-word;
    border: 6px solid #4CD68E;
    text-align: center;
}
#start-card span {
    display: inline-block;
    line-height: 50px;
    margin-top: 20;
    width: 250px;
    font-size: 30px;
    vertical-align: middle;
}
#footer .button {
    color: #fff;
}
@-webkit-keyframes bounceIn {
    0% {
        -webkit-transform: scale(0, 0);
    }
    70% {
        -webkit-transform: scale(1.2, 1.2);
    }
    100% {
        -webkit-transform: scale(1, 1);
    }
}
.swipe-card.pop-in-start {
    -webkit-transform: scale(0, 0);
}
.swipe-card.pop-in {
    -webkit-animation: bounceIn 0.3s ease-out;
}
.card-container {};


#blue {
    background-color: blue;
    max-width: 200px;
    margin-left: 40px;
}
#red {
    background-color: red;
}
#pink {
    background-color: pink;
}

#next {
  color: white;
  text-align: center;
  position:absolute;
  top:460px;
  margin:auto;
  width: 100%;
}

#mydiv {
  margin:auto; text-align: center;
}
</style>

<script type="text/javascript">
angular.module('starter', ['ionic', 'ionic.contrib.ui.cards'])

.directive('noScroll', function($document) {
    return {
        restrict: 'A',
        link: function($scope, $element, $attr) {
            $document.on('touchmove', function(e) {
                e.preventDefault();
            });
        }
    };
})

.controller('CardsCtrl', function($scope, $ionicSwipeCardDelegate, $rootScope) {
    $rootScope.accepted = 0;
    $rootScope.rejected = 0;
    var cardTypes = [{
        title: 'Swipe down to clear the card',
        image: 'http://ionicframework.com.s3.amazonaws.com/demos/ionic-contrib-swipecards/pic.png'
    }, {
        title: 'Where is this?',
        image: 'http://ionicframework.com.s3.amazonaws.com/demos/ionic-contrib-swipecards/pic.png'
    }, {
        title: 'What kind of grass is this?',
        image: 'http://ionicframework.com.s3.amazonaws.com/demos/ionic-contrib-swipecards/pic2.png'
    }, {
        title: 'What beach is this?',
        image: 'http://ionicframework.com.s3.amazonaws.com/demos/ionic-contrib-swipecards/pic3.png'
    }, {
        title: 'What kind of clouds are these?',
        image: 'http://ionicframework.com.s3.amazonaws.com/demos/ionic-contrib-swipecards/pic4.png'
    }];

/** T R Y I N G  T O  F I X  A N I M A T I O N  **/

/**
  $rootScope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams){
        // determine the direction of the transition
  $rootScope.isForward = toState.data.index > fromState.data.index;
   });

 http://forum.ionicframework.com/t/setting-the-transition-direction-animation/541/21 **/

    $scope.cards = Array.prototype.slice.call(cardTypes, 0, 0);

    $scope.cardSwiped = function(index) {
        $scope.addCard();
    };

    $scope.cardDestroyed = function(index) {
        if (this.swipeCard.positive === true) {
            $scope.$root.accepted++;
        } else {
            $scope.$root.rejected++;
        }
        $scope.cards.splice(index, 1);
        if ( $scope.$root.accepted > 1) {
           console.log('next');
             $rootScope.next = true;
      }
    };

    $scope.addCard = function() {
        var newCard = cardTypes[Math.floor(Math.random() * cardTypes.length)];
        newCard.id = Math.random();
        $scope.cards.push(angular.extend({}, newCard));
    };
})

.controller('CardCtrl', function($scope, $ionicSwipeCardDelegate, $rootScope) {
    $scope.accept = function() {
        var card = $ionicSwipeCardDelegate.getSwipebleCard($scope);
        card.swipe(true);
    };
    $scope.reject = function() {
        var card = $ionicSwipeCardDelegate.getSwipebleCard($scope);
        card.swipe();
    };
})

.controller('ContentController', function($scope, $ionicSideMenuDelegate) {
    $scope.toggleLeft = function() {
        console.log('swiped left for menu');
        $ionicSideMenuDelegate.toggleLeft();
    };
})


.directive('dragBack', function($ionicGesture, $state) {
    return {
        restrict: 'A',
        link: function(scope, elem, attr) {

            $ionicGesture.on('swipe', function(event) {

                console.log('Got swiped!');
                event.preventDefault();
                window.history.back();

            }, elem);

        }
    }
})


.controller('LoginCtrl', function($scope) {

})
    .controller('CreateProfileCtrl', function($scope) {

    })

.controller('Test2Ctrl', function($ionicGesture, $scope) {
   /* $ionicGesture.on('swipe', function(event) {
        console.log('Got swiped!');
        event.preventDefault();
        window.history.back();
    }, $('ion-slide')); */

})


.controller('MyCtrl', function($scope, $timeout) {
  $scope.myTitle = 'Template';

  $scope.data = {
    swipe : 0,
    swiperight: 0,
    swipeleft: 0,
    tap : 0,
    doubletap : 0,
    scroll : 0
  };

  $scope.reportEvent = function(event)  {
    console.log('Reporting : ' + event.type);

    $timeout(function() {
      $scope.data[event.type]++;
    })
  }


})

.directive('detectGestures', function($ionicGesture) {
  return {
    restrict :  'A',

    link : function(scope, elem, attrs) {
      var gestureType = attrs.gestureType;

      switch(gestureType) {
        case 'swipe':
          $ionicGesture.on('swipe', scope.reportEvent, elem);
          break;
        case 'swiperight':
          $ionicGesture.on('swiperight', scope.reportEvent, elem);
          break;
        case 'swipeleft':
          $ionicGesture.on('swipeleft', scope.reportEvent, elem);
          break;
        case 'doubletap':
          $ionicGesture.on('doubletap', scope.reportEvent, elem);
          break;
        case 'tap':
          $ionicGesture.on('tap', scope.reportEvent, elem);
          break;
        case 'scroll':
          $ionicGesture.on('scroll', scope.reportEvent, elem);
          break;
      }

    }
  }
})




.controller('MatchCtrl', function($scope, $ionicViewService) {
    $scope.matches = [{
        'name': 'Tiffany Wang',
        'email': 't@wang.com',
        'phone': '214-748-3647',
        'title': 'iOS Engineer at Apple',
        'location': 'San Francisco, CA',
        'id': 1
    }, {
        'name': 'John Smith',
        'email': 'j@smith.com',
        'phone': '123-456-7890',
        'title': 'UI/UX at Airbnb',
        'location': 'Berkeley, CA',
        'id': 2
    }, {
        'name': 'John Smith',
        'email': 'j@smith.com',
        'phone': '123-456-7890',
        'title': 'UI/UX at Airbnb',
        'location': 'Berkeley, CA',
        'id': 3
    }, {
        'name': 'John Smith',
        'email': 'j@smith.com',
        'phone': '123-456-7890',
        'title': 'UI/UX at Airbnb',
        'location': 'Berkeley, CA',
        'id': 4
    }, ];
    $scope.orderList = 'name';

    var history = $ionicViewService.getCurrentView();
     //.getBackView();
    console.log(history);
    //history.go();
 /*   rootScope.$on('$stateChangeSuccess', function (ev, to, toParams, from, fromParams) {
   if (from.name == "app.view2" && to.name =="app.view1"){
        console.log('doing');
   }
}); */

})


.config(function($stateProvider, $urlRouterProvider) {

    // Ionic uses AngularUI Router which uses the concept of states
    // Learn more here: https://github.com/angular-ui/ui-router
    // Set up the various states which the app can be in.
    // Each state's controller can be found in controllers.js
    $stateProvider


    .state('login', {
        url: "/login",
        templateUrl: "homeview.html",
        controller: 'LoginCtrl'
    })
        .state('createProfile', {
            url: "/create-profile",
            templateUrl: "create-profile.html",
            controller: 'CreateProfileCtrl'
        })

    // setup an abstract state for the tabs directive
    .state('pane', {
        url: "/pane",
        //abstract: true,
        templateUrl: "pane.html",
        controller: 'CardsCtrl'
    })

    .state('matches', {
        url: "/matches",
        //abstract: true,
        templateUrl: "matches.html",
        controller: 'MatchCtrl'
    })


    .state('meet', {
        url: "/meet",
        //abstract: true,
        templateUrl: "meet.html",
        controller: 'CardsCtrl'
    })


    .state('test', {
        url: '/test',
        templateUrl: "test.html",
        controller: 'MatchCtrl'
    })

    .state('test2', {
        url: '/test2',
        templateUrl: "test2.html",
        controller: 'MyCtrl'
    })


    // Each tab has its own nav history stack:
    .state('tab.dash', {
        url: '/dash',
        views: {
            'tab-dash': {
                templateUrl: 'templates/tab-dash.html',
                controller: 'DashCtrl'
            }
        }
    })

    // if none of the above states are matched, use this as the fallback
    $urlRouterProvider.otherwise('/login');

});

b = document.documentElement;
b.setAttribute('data-useragent', navigator.userAgent);
b.setAttribute('data-viewport', navigator.userAgent);
b.setAttribute('data-platform', navigator.platform);
b.className += ((!!('ontouchstart' in window) || !!('onmsgesturechange' in window)) ? ' touch' : '');
</script>


<body ng-app="starter" animation="slide-left-right-ios7" no-scroll>

    <ion-nav-view></ion-nav-view>

</body>





</html>
